<vgr-page>
  <vgr-page-header><h1>Administration</h1></vgr-page-header>

  <vgr-page-body>
    <vgr-page-block>
      <h2 style="margin-bottom: 16px">Avdelningar</h2>

      <vgr-list [flexibleHeader]="true">
        <vgr-list-header>
        </vgr-list-header>

        <vgr-list-item *ngFor="let unit of units" #theListItem>
          <vgr-list-item-header>
            <vgr-list-column [width]="3">{{unit.id}}</vgr-list-column>
            <vgr-list-column [width]="4">{{unit.name}}</vgr-list-column>
            <vgr-list-column [width]="4">{{unit.clinic?.name}}</vgr-list-column>
          </vgr-list-item-header>

          <vgr-list-item-content>
            <app-units-admin-form [unit]="unit"
                                  [showId]="false"
                                  [showDelete]="true"
                                  (cancelEvent)="theListItem.setExpandOrCollapsed()"
                                  (openDeleteEvent)="openDeleteModal(unit)" (saveEvent)="save()">

            </app-units-admin-form>
          </vgr-list-item-content>
        </vgr-list-item>

        <vgr-list-item #addListItem>
          <vgr-list-item-header>
            <vgr-list-column width="5">
              <div class="add-row vgr-icon-plus">LÃ¤gg till avdelning</div>
            </vgr-list-column>
          </vgr-list-item-header>

          <vgr-list-item-content>
            <app-units-admin-form [unit]="null"
                                  [showId]="true"
                                  [showDelete]="false"
                                  (cancelEvent)="addListItem.setExpandOrCollapsed()"
                                  (saveEvent)="save()">

            </app-units-admin-form>
          </vgr-list-item-content>
        </vgr-list-item>
      </vgr-list>

    </vgr-page-block>

    <!--<vgr-page-block>
      <pre>{{unitForm?.value | json}}</pre>
    </vgr-page-block>-->
  </vgr-page-body>
</vgr-page>

<app-delete-modal [itemLabel]="unitForDeletion?.name" (confirmDelete)="confirmDelete()"></app-delete-modal>
